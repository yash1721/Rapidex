var z=Object.create;var T=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var D=e=>T(e,"__esModule",{value:!0});var K=(e,t)=>{D(e);for(var o in t)T(e,o,{get:t[o],enumerable:!0})},Q=(e,t,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of O(t))!J.call(e,r)&&r!=="default"&&T(e,r,{get:()=>t[r],enumerable:!(o=N(t,r))||o.enumerable});return e},b=e=>Q(D(T(e!=null?z(H(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);K(exports,{CountdownCircleTimer:()=>F,useCountdown:()=>$});var k=b(require("react")),W=b(require("react-native")),R=b(require("react-native-svg"));var M=b(require("react"));var f=b(require("react")),B=b(require("react")),E=typeof window=="undefined"?B.useEffect:B.useLayoutEffect,L=({isPlaying:e,duration:t,startAt:o=0,updateInterval:r=0,onComplete:a,onUpdate:n})=>{let[s,p]=(0,f.useState)(o),c=(0,f.useRef)(0),d=(0,f.useRef)(o),y=(0,f.useRef)(o*-1e3),u=(0,f.useRef)(null),i=(0,f.useRef)(null),l=(0,f.useRef)(null),g=w=>{let m=w/1e3;if(i.current===null){i.current=m,u.current=requestAnimationFrame(g);return}let h=m-i.current,S=c.current+h;i.current=m,c.current=S;let G=d.current+(r===0?S:(S/r|0)*r),x=d.current+S,V=typeof t=="number"&&x>=t;p(V?t:G),V||(u.current=requestAnimationFrame(g))},P=()=>{u.current&&cancelAnimationFrame(u.current),l.current&&clearTimeout(l.current),i.current=null},C=(0,f.useCallback)(w=>{P(),c.current=0;let m=typeof w=="number"?w:o;d.current=m,p(m),e&&(u.current=requestAnimationFrame(g))},[e,o]);return E(()=>{if(n==null||n(s),t&&s>=t){y.current+=t*1e3;let{shouldRepeat:w=!1,delay:m=0,newStartAt:h}=(a==null?void 0:a(y.current/1e3))||{};w&&(l.current=setTimeout(()=>C(h),m*1e3))}},[s,t]),E(()=>(e&&(u.current=requestAnimationFrame(g)),P),[e,t,r]),{elapsedTime:s,reset:C}};var q=(e,t,o)=>{let r=e/2,a=t/2,n=r-a,s=2*n,p=o==="clockwise"?"1,0":"0,1",c=2*Math.PI*n;return{path:`m ${r},${a} a ${n},${n} 0 ${p} 0,${s} a ${n},${n} 0 ${p} 0,-${s}`,pathLength:c}},v=(e,t)=>e===0||e===t?0:typeof t=="number"?e-t:0,I=e=>({position:"relative",width:e,height:e}),A={display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%"};var U=(e,t,o,r,a)=>{if(r===0)return t;let n=(a?r-e:e)/r;return t+o*n},j=e=>{var t,o;return(o=(t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(r,a,n,s)=>`#${a}${a}${n}${n}${s}${s}`).substring(1).match(/.{2}/g))==null?void 0:t.map(r=>parseInt(r,16)))!=null?o:[]},X=(e,t)=>{var u;let{colors:o,colorsTime:r,isSmoothColorTransition:a=!0}=e;if(typeof o=="string")return o;let n=(u=r==null?void 0:r.findIndex((i,l)=>i>=t&&t>=r[l+1]))!=null?u:-1;if(!r||n===-1)return o[0];if(!a)return o[n];let s=r[n]-t,p=r[n]-r[n+1],c=j(o[n]),d=j(o[n+1]),y=!!e.isGrowing;return`rgb(${c.map((i,l)=>U(s,i,d[l]-i,p,y)|0).join(",")})`},$=e=>{let{duration:t,initialRemainingTime:o,updateInterval:r,size:a=180,strokeWidth:n=12,trailStrokeWidth:s,isPlaying:p=!1,isGrowing:c=!1,rotation:d="clockwise",onComplete:y,onUpdate:u}=e,i=(0,M.useRef)(),l=Math.max(n,s!=null?s:0),{path:g,pathLength:P}=q(a,l,d),{elapsedTime:C}=L({isPlaying:p,duration:t,startAt:v(t,o),updateInterval:r,onUpdate:typeof u=="function"?m=>{let h=Math.ceil(t-m);h!==i.current&&(i.current=h,u(h))}:void 0,onComplete:typeof y=="function"?m=>{var x;let{shouldRepeat:h,delay:S,newInitialRemainingTime:G}=(x=y(m))!=null?x:{};if(h)return{shouldRepeat:h,delay:S,newStartAt:v(t,G)}}:void 0}),w=t-C;return{elapsedTime:C,path:g,pathLength:P,remainingTime:Math.ceil(w),rotation:d,size:a,stroke:X(e,w),strokeDashoffset:U(C,0,P,t,c),strokeWidth:n}};var F=e=>{let{children:t,duration:o,strokeLinecap:r,trailColor:a,trailStrokeWidth:n}=e,{path:s,pathLength:p,stroke:c,strokeDashoffset:d,remainingTime:y,elapsedTime:u,size:i,strokeWidth:l}=$(e);return k.default.createElement(W.View,{style:I(i)},k.default.createElement(R.default,{viewBox:`0 0 ${i} ${i}`,width:i,height:i},k.default.createElement(R.Path,{d:s,fill:"none",stroke:a??"#d9d9d9",strokeWidth:n??l}),u!==o&&k.default.createElement(R.Path,{d:s,fill:"none",stroke:c,strokeLinecap:r??"round",strokeWidth:l,strokeDasharray:p,strokeDashoffset:d})),typeof t=="function"&&k.default.createElement(W.View,{style:A},t({remainingTime:y,elapsedTime:u,color:c})))};F.displayName="CountdownCircleTimer";
